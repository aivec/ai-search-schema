# v1.1.2 リリースノート

**リリース日**: 2026-01-23

## 概要

WordPress.org 審査対応の継続として、Text Domain とプラグインファイル名をスラッグに統一しました。また、PRO版マルチロケーション機能のためのフィルターフックを追加しました。

## 変更内容

### Text Domain の変更

| 変更前 | 変更後 |
|--------|--------|
| `ai-search-schema` | `aivec-ai-search-schema` |

- 全ての `__()`, `esc_html_e()`, `_e()` 等の翻訳関数呼び出しを更新
- プラグインヘッダーの `Text Domain` を更新
- 翻訳ファイル名を `aivec-ai-search-schema-*.po/mo` に変更

### プラグインファイル名の変更

| 変更前 | 変更後 |
|--------|--------|
| `ai-search-schema.php` | `aivec-ai-search-schema.php` |

### CSS クラス名・data属性の変更

| 変更前 | 変更後 |
|--------|--------|
| `class="ai-search-schema"` | `class="avc-ais-schema"` |
| `data-ai-search-schema` | `data-avc-ais-schema` |

### メニュースラッグの変更

| 変更前 | 変更後 |
|--------|--------|
| `page=ai-search-schema` | `page=aivec-ai-search-schema` |

### PRO版連携用フィルターフックの追加

PRO版 v1.5.0 のマルチロケーション機能に対応するため、以下のフィルターを追加しました。

#### `avc_ais_local_business_data`

LocalBusinessスキーマのデータをオーバーライドするためのフィルター。

```php
$local_business = apply_filters( 'avc_ais_local_business_data', $local_business, $options );
```

| パラメータ | 型 | 説明 |
|-----------|-----|------|
| `$local_business` | array | LocalBusinessスキーマデータ |
| `$options` | array | プラグイン設定 |

#### `avc_ais_graph`

JSON-LDグラフ全体をカスタマイズするためのフィルター。

```php
$graph = apply_filters( 'avc_ais_graph', $graph, $options );
```

| パラメータ | 型 | 説明 |
|-----------|-----|------|
| `$graph` | array | @graph配列 |
| `$options` | array | プラグイン設定 |

## 変更ファイル

### 主要ファイル

- `aivec-ai-search-schema.php` (旧 `ai-search-schema.php`) - ファイル名変更、Text Domain更新
- `src/Plugin.php` - Text Domain更新
- `src/Schema/class-avc-ais-graphbuilder.php` - PRO版フィルターフック追加
- `src/Schema/class-avc-ais-output.php` - CSSクラス名変更
- `includes/class-avc-ais-settings.php` - メニュースラッグ、Text Domain更新

### 翻訳ファイル

- `languages/aivec-ai-search-schema.pot` (新規)
- `languages/aivec-ai-search-schema-ja.po` (新規)
- `languages/aivec-ai-search-schema-ja.mo` (新規)
- `languages/aivec-ai-search-schema-ja_JP.po` (新規)
- `languages/aivec-ai-search-schema-ja_JP.mo` (新規)

### ビルド・テスト

- `gulpfile.js` - プラグインファイル名参照更新
- `phpunit.xml.dist` - プラグインファイル名参照更新
- `tests/phpunit/bootstrap.php` - プラグインファイル名参照更新
- `tests/phpunit/*.php` - CSSクラス名参照更新

## 互換性

- **既存ユーザーへの影響**: プラグインファイル名の変更により、更新後にプラグインの再有効化が必要な場合があります
- **PRO版互換性**: PRO版 v1.5.0 以降で新フィルターフックを使用

## 関連

- WordPress.org 審査フィードバック対応
- PRO版マルチロケーション機能準備
